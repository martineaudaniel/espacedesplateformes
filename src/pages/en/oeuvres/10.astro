---
// src/pages/works/artwork1.astro
import DefaultLayout from '../../../layouts/DefaultLayout.astro'
import { Pagination } from 'accessible-astro-components'
import PhotoSwipeGallery from '../../../components/PhotoSwipeGallery.astro'

// Get current page number from the filename (e.g., "1" for 1.astro)
const currentPage = parseInt(Astro.params.pageNumber || '10', 10)
const totalPages = 13 // Set this to the total number of pages you have
const galleryColumns = 2

// Pagination URLs
const basePath = import.meta.env.BASE_URL // Dynamically retrieve the base path

const firstPage = currentPage > 1 ? `${basePath}en/oeuvres/1` : null
const previousPage = currentPage > 1 ? `${basePath}en/oeuvres/${currentPage - 1}` : null
const nextPage = currentPage < totalPages ? `${basePath}en/oeuvres/${currentPage + 1}` : null
const lastPage = currentPage < totalPages ? `${basePath}en/oeuvres/${totalPages}` : null

const artwork = {
  title: 'L’espace de visionnement comme espace intime : Projection of photographs by students',
  subtitle: '',
  description: `Our relationship with platforms begins with the creation of a personal and private space. Platforms ask their users not only to passively view a stream of images and sounds but also to develop technical skills and use them to meet their entertainment needs and explore the world.

In these photos, taken by users who wanted to share their home cinema and television viewing spaces, the classic TV, computer screen, tablet, phone, or game console become elements of a daily ritual tailored to individual needs. We see that the viewing experience depends on personal mastery of technology and on the material and economic conditions that enable our access to platforms, allowing us to create a personal space while enjoying the comfort of being at home—often a far more powerful allure than going to a movie theater... and the comfort of the space where the viewing experience unfolds often takes precedence over the content itself.`,
  images: [
    `${basePath}assets/img/lespace-de-visionnement-comme-espace-intime/1.jpg`,
    `${basePath}assets/img/lespace-de-visionnement-comme-espace-intime/2.jpg`,
    `${basePath}assets/img/lespace-de-visionnement-comme-espace-intime/3.jpg`,
    `${basePath}assets/img/lespace-de-visionnement-comme-espace-intime/4.jpg`,
    `${basePath}assets/img/lespace-de-visionnement-comme-espace-intime/5.jpg`,
    `${basePath}assets/img/lespace-de-visionnement-comme-espace-intime/6.jpg`,
    `${basePath}assets/img/lespace-de-visionnement-comme-espace-intime/7.jpg`,
    `${basePath}assets/img/lespace-de-visionnement-comme-espace-intime/8.jpg`,
    `${basePath}assets/img/lespace-de-visionnement-comme-espace-intime/9.jpg`,
    `${basePath}assets/img/lespace-de-visionnement-comme-espace-intime/10.jpg`,
    `${basePath}assets/img/lespace-de-visionnement-comme-espace-intime/11.jpg`,
  ],
  notes: ['Carl', 'Greta', 'Myriam', 'Philippe', 'Valérie', 'Contributrices et contributeurs anonymes'],
}
---

<DefaultLayout title={artwork.title}>
  <section class="my-16">
    <div class="container mx-auto flex gap-8">
      <!-- Left Half: Image Gallery (PhotoSwipe Gallery) -->
      <div class="flex-1 p-8">
        <PhotoSwipeGallery images={artwork.images} columns={galleryColumns} />
      </div>

      <!-- Right Half: Text Content -->
      <div class="flex-1 p-8">
        <div>
          <h1 class="mb-4 text-4xl font-bold">{artwork.title}</h1>
          <h3 class="mb-4 text-2xl font-semibold text-gray-400">{artwork.subtitle}</h3>
          <div class="whitespace-pre-wrap text-xl" set:html={artwork.description} />
        </div>
        <!-- Notes Section -->
        <section class="reference-section mt-8 border-t pt-4 text-sm text-gray-500">
          <h2 class="text-lg font-bold">Remerciements</h2>
          <ol class="list-disc pl-5">
            {
              artwork.notes.map((note, index) => (
                <li key={index} class="mt-2">
                  {note}
                </li>
              ))
            }
          </ol>
        </section>
      </div>
    </div>
  </section>

  <!-- Pagination -->
  <div class="mt-12 grid place-content-center">
    <Pagination
      firstPage={firstPage}
      previousPage={previousPage}
      nextPage={nextPage}
      lastPage={lastPage}
      currentPage={currentPage}
      totalPages={totalPages}
    />
  </div>
</DefaultLayout>
